{"version":3,"sources":["webpack:///./src/templates/blog.js"],"names":["query","initiateAnimations","allBlockContent","document","querySelector","allChildrenElements","children","index","length","element","classList","add","console","log","observer","IntersectionObserver","entries","forEach","entry","isIntersecting","intersectionRatio","target","threshold","querySelectorAll","animation","observe","openMenu","e","toggle","callToActionLoaded","window","addEventListener","scrolledToBottom","innerWidth","innerHeight","scrollY","body","offsetHeight","style","opacity","pointerEvents","BLog","props","title","data","sanityPost","seo","seo_title","description","meta_description","image","mainImage","asset","fluid","src","id","categories","map","category","className","onLoad","alt","publishedAt","blocks","_rawBody","projectId","dataset","serializers","allSanityPost","edges","edge","to","node","slug","current","author","imgStyle","objectPosition","hotspot","x","y","name","primaryTitle","onClick"],"mappings":"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","file":"component---src-templates-blog-js-8aadc89a2632ed83c671.js","sourcesContent":["import React from \"react\"\nimport { Link } from \"gatsby\"\n\nimport Layout from \"../components/layout\"\nimport SEO from \"../components/seo\"\nimport { graphql } from \"gatsby\"\nimport Img from \"gatsby-image\"\nimport BlockContent from \"@sanity/block-content-to-react\"\nimport serializers from \"../components/serializers\"\nimport Footer from \"../components/footer\"\n\nexport const query = graphql`\n  query($Slug: String) {\n    sanityPost(slug: { current: { eq: $Slug } }) {\n      seo {\n        _key\n        _type\n        focus_keyword\n        seo_title\n        meta_description\n      }\n      title\n      publishedAt\n      author {\n        name\n        primaryTitle\n        corporate_title\n        image {\n          asset {\n            fluid(maxWidth: 200) {\n              ...GatsbySanityImageFluid\n            }\n          }\n          hotspot {\n            height\n            width\n            x\n            y\n          }\n        }\n      }\n\n      categories\n      _rawBody\n      body {\n        sanityChildren {\n          text\n        }\n      }\n      mainImage {\n        asset {\n          fluid(maxWidth: 800) {\n            ...GatsbySanityImageFluid\n          }\n        }\n      }\n    }\n    allSanityPost(\n      limit: 10\n      filter: { slug: { current: { ne: $Slug } } }\n      sort: { fields: publishedAt, order: DESC }\n    ) {\n      edges {\n        node {\n          title\n          publishedAt\n          slug {\n            current\n          }\n          mainImage {\n            asset {\n              fluid(maxWidth: 200) {\n                ...GatsbySanityImageFluid_withWebp\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n`\n\nconst BLog = (props) => {\n  return (\n    <Layout>\n      <SEO\n        title={props.data.sanityPost.seo.seo_title}\n        description={props.data.sanityPost.seo.meta_description}\n        image={props.data.sanityPost.mainImage.asset.fluid.src}\n      />\n      <section id=\"blogPost\">\n        <ol>\n          {props.data.sanityPost.categories.map(function (category) {\n            return (\n              <li>\n                <p className=\"post_category\">{category}</p> <span>+</span>\n              </li>\n            )\n          })}\n        </ol>\n        <h1>{props.data.sanityPost.title}</h1>\n\n        <Img\n          onLoad={initiateAnimations}\n          fluid={props.data.sanityPost.mainImage.asset.fluid}\n          alt={props.data.sanityPost.title}\n        ></Img>\n\n        <p className=\"publish_date\">\n          Published: {props.data.sanityPost.publishedAt}\n        </p>\n\n        <div>\n          <BlockContent\n            className=\"allBlockContent\"\n            blocks={props.data.sanityPost._rawBody}\n            projectId=\"j7i4hfvy\"\n            dataset=\"production\"\n            serializers={serializers}\n          />\n        </div>\n\n        <div className=\"more_post_wrapper\">\n          <h2>More Insights</h2>\n\n          <ol className=\" more_post animation  animation--fade-up\">\n            {props.data.allSanityPost.edges.map((edge) => {\n              return (\n                <Link to={`/blog/${edge.node.slug.current}`}>\n                  <li>\n                    <Img\n                      fluid={edge.node.mainImage.asset.fluid}\n                      onLoad={initiateAnimations}\n                      alt={edge.node.title}\n                    />\n                    <h2 className=\"link_title\">{edge.node.title}</h2>\n                    <h3>Published at: {edge.node.publishedAt}</h3>\n                  </li>\n                </Link>\n              )\n            })}\n          </ol>\n        </div>\n      </section>\n\n      <div className=\"call_to_action\">\n        <Img\n          onLoad={callToActionLoaded}\n          fluid={props.data.sanityPost.author.image.asset.fluid}\n          alt={props.data.sanityPost.title}\n          imgStyle={{\n            objectPosition: `${props.data.sanityPost.author.image.hotspot.x}%  ${props.data.sanityPost.author.image.hotspot.y}%`,\n          }}\n        ></Img>\n        <p className=\"author\">Author</p>\n        <p className=\"author_name\"> {props.data.sanityPost.author.name}</p>\n        <p className=\"author_position\">\n          {props.data.sanityPost.author.primaryTitle}\n        </p>\n\n        <button onClick={openMenu} className=\"getInTouch\">\n          Contact\n        </button>\n        <div className=\"white_box\"></div>\n      </div>\n      <Footer />\n    </Layout>\n  )\n}\n\nexport default BLog\n\nfunction initiateAnimations() {\n  const allBlockContent = document.querySelector(\".allBlockContent\")\n  const allChildrenElements = allBlockContent.children\n\n  for (let index = 0; index < allChildrenElements.length; index++) {\n    const element = allChildrenElements[index]\n    element.classList.add(\"animation\")\n    element.classList.add(\"animation--fade-up\")\n  }\n\n  // allChildrenElements.classList.add(\"animation\")\n  // allChildrenElements.classList.add(\"animation--fade-up\")\n\n  console.log(allBlockContent.children)\n\n  // callback function to do animations\n  const scrollImations = (entries, observer) => {\n    entries.forEach((entry) => {\n      // only do animation if the element is fully on screen\n      if (entry.isIntersecting && entry.intersectionRatio >= 0) {\n        entry.target.classList.add(\"animation--visible\")\n      } else {\n      }\n    })\n  }\n\n  // create the observer\n  const options = {\n    threshold: 0.2,\n  }\n  const observer = new IntersectionObserver(scrollImations, options)\n\n  // target the elements to be observed\n  const animations = document.querySelectorAll(\".animation\")\n  animations.forEach((animation) => {\n    observer.observe(animation)\n  })\n}\n\nfunction openMenu(e) {\n  document.querySelector(\".menu\").classList.toggle(\"open_menu\")\n  document.querySelector(\".menu\").classList.toggle(\"menu_slide\")\n}\n\nconsole.log()\n\nfunction scrollFunction() {\n  window.addEventListener(\"scroll\", scrolled)\n}\n\nfunction scrolled() {\n  if (window.innerWidth > 1023) {\n    if (document.body.scrollTop > 1 || document.documentElement.scrollTop > 1) {\n      document.querySelector(\"header\").classList.add(\"header_background\")\n    } else {\n      document.querySelector(\"header\").classList.remove(\"header_background\")\n    }\n  }\n}\n\nfunction callToActionLoaded() {\n  window.addEventListener(\"scroll\", scrolledToBottom)\n}\n\nfunction scrolledToBottom() {\n  if (window.innerWidth > 1024) {\n    if (\n      window.innerHeight + window.scrollY >=\n      document.body.offsetHeight - 300\n    ) {\n      document.querySelector(\".call_to_action\").style.opacity = \"0\"\n      document.querySelector(\".call_to_action\").style.pointerEvents = \"none\"\n    } else {\n      document.querySelector(\".call_to_action\").style.opacity = \"1\"\n      document.querySelector(\".call_to_action\").style.pointerEvents = \"auto\"\n    }\n  }\n}\n"],"sourceRoot":""}